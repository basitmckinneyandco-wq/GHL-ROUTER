<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>GHL PowerBI Router</title>
  <style>
    html,body { height:100%; margin:0; font-family: Arial, Helvetica, sans-serif; }
    iframe { width:100%; height:100vh; border:0; }
    .denied { color:#b00; text-align:center; padding:30px; }
  </style>
</head>
<body>
  <div id="content">Loadingâ€¦</div>

<script>
/* ---------- Configuration: map emails to dashboards ---------- */
const USER_DASHBOARD_MAP = {
  "basitmckinneyandco@gmail.com": "https://app.powerbi.com/view?r=eyJrIjoiZjY2OGUxMDctYjgyMS00NGRkLThkYjAtYWQzZGEyMDY3MDIzIiwidCI6ImE3YTY2OWZlLWMxNDktNDNkYS04OTAyLTIxMDdhNWFkYjJiZCIsImMiOjl9",
  "zara@mckinneyandco.com": "https://app.powerbi.com/view?r=REPLACE_WITH_ZARA_LINK"
};
/* ---------------------------------------------------------------- */

function getQueryParams() {
  const q = {};
  const raw = location.search.replace(/^\?/, '');
  raw.split('&').forEach(pair => {
    if (!pair) return;
    const [k, v] = pair.split('=');
    q[decodeURIComponent(k)] = v ? decodeURIComponent(v) : '';
  });
  return q;
}

function showDenied(){
  document.getElementById('content').innerHTML =
    '<div class="denied">ðŸš« Access Denied â€” you are not authorized to view this dashboard.</div>';
}

function showIframe(url){
  document.getElementById('content').innerHTML =
    `<iframe src="${url}" allowfullscreen></iframe>`;
}

// Main
const qp = getQueryParams();
const email = qp.email ? qp.email.toLowerCase() : null;

if(email && USER_DASHBOARD_MAP[email]){
  showIframe(USER_DASHBOARD_MAP[email]);
} else {
  showDenied();
}
</script>
</body>
</html>
